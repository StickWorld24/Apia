<%@page import="com.dogma.DogmaConstants"%><%@include file="../../includes/startInc.jsp" %><html lang="<%=biz.statum.apia.web.bean.BasicBeanStatic.getUserDataStatic(request).getLangCode()%>"><head><%@include file="../../includes/headInclude.jsp" %><script type="text/javascript" src="<system:util show="context" />/page/modals/users.js"></script><script type="text/javascript" src="<system:util show="context" />/page/modals/pools.js"></script><script type="text/javascript" src="<system:util show="context" />/page/modals/documents.js"></script><script type="text/javascript" src="<system:util show="context" />/page/monitor/documents/list.js"></script><script type="text/javascript" src="<system:util show="context" />/page/includes/navButtons.js"></script><script type="text/javascript" src="<system:util show="context" />/page/includes/adminFav.js"></script><script type="text/javascript" src="<system:util show="context" />/page/includes/campaigns.js"></script><script type="text/javascript" src="<system:util show="context" />/page/includes/adminActions.js"></script><script type="text/javascript" src="<system:util show="context" />/js/autocomplete/autocompleter.js"></script><script type="text/javascript" src="<system:util show="context" />/js/autocomplete/autocompleter.request.js"></script><script type="text/javascript" src="<system:util show="context" />/js/autocomplete/observer.js"></script><!-- DRAG AND DROP BEHAVIOUR --><script type="text/javascript" src="<system:util show="context" />/js/dragAndDrop/Form.MultipleFileInput.js"></script><script type="text/javascript" src="<system:util show="context" />/js/dragAndDrop/Form.Upload.js"></script><script type="text/javascript" src="<system:util show="context" />/js/dragAndDrop/Request.File.js"></script><!-- FOLDERS --><script type="text/javascript" src="<system:util show="context" />/page/modals/foldersDocuments.js"></script><script type="text/javascript" src="<system:util show="context" />/page/includes/foldersDisplay.js"></script><script type="text/javascript">
		var URL_REQUEST_AJAX = '/apia.monitor.MonitorDocumentAction.run';
		var URL_REQUEST_AJAX_ABM = '/apia.monitor.ABMDocumentAction.run';
		var ADDITIONAL_INFO_IN_TABLE_DATA  = true;	
		var MODE_MONITOR = toBoolean('<system:edit show="value" from="theBean" field="modeMonitor" />');
		var DOC_INDEX = toBoolean('<system:edit show="constant" from="com.dogma.Parameters" field="DOC_INDEX_SELECTED"/>'); 
		var INST_PROC = '<system:edit show="constant" from="com.dogma.vo.DocumentVo" field="DOC_TYPE_PROCESS_INST"/>';
		var INST_ENT = '<system:edit show="constant" from="com.dogma.vo.DocumentVo" field="DOC_TYPE_BUS_ENT_INST"/>';
		var ATT_INST_ENT = '<system:edit show="constant" from="com.dogma.vo.DocumentVo" field="DOC_TYPE_BUS_ENT_INST_ATTRIBUTE"/>';
		var ATT_INST_PROC = '<system:edit show="constant" from="com.dogma.vo.DocumentVo" field="DOC_TYPE_PRO_INST_ATTRIBUTE"/>';
		var LBL_TITLE = '<system:label show="text" label="lblTitle" forScript="true" forHtml="true"/>';
		var LBL_VALUE = '<system:label show="text" label="lblVal" forScript="true" forHtml="true"/>';
		var MSG_NO_PERM = '<system:label show="text" label="msgDocNoPer" forScript="true" forHtml="true"/>';
		var MSG_OK_MSSG = '<system:label show="text" label="msgOpOk" forScript="true" forHtml="true"/>';
		var MSG_MST_ENTR_FLTR = '<system:label show="text" label="lblMstSrtFilter" forScript="true" forHtml="true"/>';
		var MSG_NME_TOO_SHORT = '<system:label show="text" label="lblNameMoreChar" forScript="true" forHtml="true"/>';
		var MSG_DOC_LOCK_BY_OTH_USR = '<system:label show="text" label="msgDocLocOthUsr" forScript="true" forHtml="true"/>';
		
		var MSG_COPY_URL = '<system:label show="text" label="msgUrlClipCpy" forScript="true" forHtml="true"/>';
		var MSG_URL_NOT_COPIED = '<system:label show="text" label="msgUrlNoClipCpy" forScript="true" forHtml="true"/>';
		
		var FROM_MONITOR = toBoolean('<system:edit show="value" from="theBean" field="fromMonitor" />');
		
		var MSG_FIRST_TIME	= '<system:label show="text" label="msgSelAtLeastOne" forScript="true" forHtml="true"/>';
		var PRIMARY_SEPARATOR		= new Element('div').set('html', '<system:edit show="constant" from="com.st.util.StringUtil" field="PRIMARY_SEPARATOR"/>').get('text');
		var PRE_FILTER = toBoolean('<system:edit show="value" from="theBean" field="preFilter" />');
		
		var UNLOCK_DOC_WARNING = '<system:label show="text" label="msgUnlockDocWarn" forScript="true" forHtml="true"/>';
		
		var ABM_EDITION_MODE 	= <%= request.getAttribute("editMode") %>;
		var CURRENT_USER 		= '<system:util show="currentLogin"/>';
		var ADMINISTRATOR_USER 	= '<%= DogmaConstants.ADMIN_LOGIN %>';
		
		var CANT_DELETE_DOCUMENT =  '<system:label show="text" label="msgCntDelFrPrm" forScript="true" forHtml="true"/>';
		var CANT_UPDATE_DOCUMENT =  '<system:label show="text" label="msgCntUpdFrPrm" forScript="true" forHtml="true"/>';
		var LBL_LEAVE_DOCS_HERE  = '<system:label show="text" label="lblLveDcsHere" forScript="true"/>';
		var LBL_DOCS_WILL_BE_DEL = '<system:label show="text" label="lblDelSel" forScript="true"/>';
// 		var CANT_DELETE_DOCUMENT =  '<system:label show="text" label="lblCntDelFrPrm" forScript="true" forHtml="true"/>';
		
		var USERMODAL_HIDE_OVERFLOW = false;
	</script></head><body><div class="body" id="bodyDiv"><div class="optionsContainer" id="optionsContainer"><system:campaign inLogin="false" inSplash="false" location="verticalUp" /><div class="fncPanel info"><div class="title"><!-- MONITOR --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="true"><system:edit show="ifValue" from="theBean" field="editorMode" value="true"><span><system:label show="text" label="mnuAbmDoc" /></span></system:edit><system:edit show="ifValue" from="theBean" field="editorMode" value="false"><span><system:label show="text" label="mnuMonDoc" /></span></system:edit></system:edit><!-- UNLOCK --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="false"><span><system:label show="text" label="mnuConUnDoc" /></span></system:edit><span class="panelPinShow" id="panelPinShow">&nbsp;</span><span class="panelPinHidde" id="panelPinHidde">&nbsp;</span><%@include file="../../includes/adminFav.jsp" %></div><div class="content divFncDescription"><div class="fncDescriptionImage" data-src="<system:edit show="value" from="theBean" field="fncImage"/>"></div><div id="fncDescriptionText"><!-- MONITOR --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="true"><system:edit show="ifValue" from="theBean" field="editorMode" value="true"><system:label show="text" label="dscFncAbmDoc"/></system:edit><system:edit show="ifValue" from="theBean" field="editorMode" value="false"><system:label show="text" label="dscFncDocMon"/></system:edit></system:edit><!-- UNLOCK --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="false"><system:label show="text" label="dscFncUnDocCtrl" forScript="true" /></system:edit></div><div class="clear"></div></div></div><system:edit show="ifValue" from="theBean" field="modeMonitor" value="true"><system:edit show="ifValue" from="theBean" field="editorMode" value="true"><div class="fncPanel options"><%@include file="../../includes/adminActions.jsp" %></div></system:edit></system:edit><div class="fncPanel options"><div class="title"><system:edit show="ifValue" from="theBean" field="editorMode" value="true"><system:label show="text" label="titOptions"/></system:edit><system:edit show="ifValue" from="theBean" field="editorMode" value="false"><system:label show="text" label="titActions"/></system:edit></div><div class="content"><!-- MONITOR --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="true"><div id="btnBus" class="button submit validate['submit'] <system:edit show="ifValue" from="theBean" field="editorMode" value="false">suggestedAction</system:edit>" title="<system:label show="tooltip" label="btnBus" />"><system:label show="text" label="btnBus" /></div><div id="btnDown" class="button submit validate['submit']" title="<system:label show="tooltip" label="btnDow" />"><system:label show="text" label="btnDow" /></div><div id="btnInfo" class="button submit validate['submit']" title="<system:label show="tooltip" label="btnInfo" />"><system:label show="text" label="btnInfo" /></div><div id="btnHist" class="button submit validate['submit']" title="<system:label show="tooltip" label="btnHis" />"><system:label show="text" label="btnHis" /></div><div id="btnDwnInfo" class="button submit validate['submit']" title="<system:label show="tooltip" label="btnDwnInfo" />"><system:label show="text" label="btnDwnInfo" /></div></system:edit><!-- UNLOCK --><system:edit show="ifValue" from="theBean" field="modeMonitor" value="false"><div id="btnUnlock" class="button suggestedAction submit validate['submit']" title="<system:label show="tooltip" label="btnUnLock" />"><system:label show="text" label="btnUnLock" /></div></system:edit><system:edit show="ifValue" from="theBean" field="editorMode" value="true"><div id="btnUnlock" class="button submit validate['submit']" title="<system:label show="tooltip" label="btnUnLock" />"><system:label show="text" label="btnUnLock" /></div></system:edit></div></div><div class="fncPanel options lastOptions"><div class="title" title="<system:label show="tooltip" label="titAdmAdtFilter"/>"><system:label show="text" label="titAdmAdtFilter"/></div><div class="content"><div class="filter"><span><system:label show="text" label="lblLastActDate"/>:</span><input id="txtCreateFrom" name="txtCreateFrom" type="text" size="9" maxlength="10" class="datePicker datePickerChecker filterInputDate"  value="<system:filter show="value" filter="9"/>">&nbsp;&nbsp;-&nbsp;&nbsp;<input id="txtCreateTo" name="txtCreateTo" type="text" size="9" maxlength="10" class="datePicker datePickerChecker filterInputDate"  value="<system:filter show="value" filter="10"/>" ></div><div class="filter"><span><system:label show="text" label="lblDes"/>:</span><input type="text" id="descFilter" name="descFilter" value="<system:filter show="value" filter="1"/>"></div><div class="filter" <system:edit show="ifValue" from="theBean" field="fromMonitor" value="true">style="display:none;"</system:edit>><span><system:label show="text" label="lblSrc"/>:</span><select id="cmbDocOrigin" onchange="enableDisableFilters(this);" name="cmbDocOrigin"  style="width: 195px !important;"><option></option><system:util show="prepareDocumentsDocType" saveOn="docType" /><system:edit show="iteration" from="docType" saveOn="docType_save"><system:edit show="saveValue" from="docType_save" field="docType" saveOn="docType"/><option value="<system:edit show="value" from="docType_save" field="docType"/>" <system:filter show="ifValue" filter="4" value="page:docType">selected</system:filter>><system:edit show="value" from="docType_save" field="docTypeName"/></option></system:edit></select></div><div class="filter" <system:edit show="ifValue" from="theBean" field="fromMonitor" value="true">style="display:none;"</system:edit>><span><system:label show="text" label="lblSrcTit"/>:</span><input type="text" id="ownerTitleFilter" name="ownerTitleFilter" value="<system:filter show="escapedValue" filter="11"/>"></div><div class="filter" <system:edit show="ifValue" from="theBean" field="fromMonitor" value="true">style="display:none;"</system:edit>><span><system:label show="text" label="lblMonInstProNroReg"/>:</span><input type="text" id="instFilter" name="instFilter" value="<system:filter show="escapedValue" filter="12"/>"></div><div class="filter" id="divContent"><system:edit show="ifValue" from="theBean" field="docIndexActive" value="true"><system:edit show="ifValue" from="theBean" field="modeMonitor" value="true"><span><system:label show="text" label="lblContent" />:</span></system:edit></system:edit><input type="<system:edit show="value" from="theBean" field="docIndexActiveType"/>" id="contentFilter" name="contentFilter" value="<system:filter show="escapedValue" filter="13"/>"></div><% if (request.getAttribute("editMode") != null && (Boolean) request.getAttribute("editMode")) { %><div class="filter" <system:edit show="ifValue" from="theBean" field="fromMonitor" value="true">style="display:none;"</system:edit>><span><system:label show="text" label="lblFldTit"/>:</span><select id="docFolderFilter" name="docFolderFilter" style="width: 195px !important;"><option></option></select></div><% } %></div></div><!-- FILTROS DE METADATOS --><div class="fncPanel options" id="docMetadataFilters" style="display: none;"><div class="title"><system:label show="text" label="titMetadataFil"/></div><div class="content" style="overflow: auto; max-height: 215px;"></div></div><!-- FILTROS DE METADATOS LIBRES --><div class="fncPanel options" id="docFreeMetadataFilters" style="display: none;"><div class="title"><system:label show="text" label="titFreeMetadataFil"/><div id="addFreeMetadataFilter" class="addRemoveFilter addFilter" title="<system:label show="text" label="lblAddFil"/>"></div></div><div class="content" style="overflow: auto; max-height: 125px;"></div></div><!-- FILTROS DE MONITOR --><system:edit show="ifValue" from="theBean" field="fromMonitor" value="true"><div id="noVisibleFiltersPanel" class="fncPanel options" ><div class="title"><system:label show="text" label="lblEjeFilApl" /></div><div class="content" id="noVisibleFilters"><div class="filter" style="margin-top: 3px; margin-bottom: 7px;"><span style="width: auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<system:label show="text" label="lblSrc" /> : <system:edit show="value" from="theBean" field="fromLabel" /></span></div><div style="margin-top: 3px; margin-bottom: 7px;"><span style="text-align: left !important;"><b>&nbsp;<system:edit show="value" from="theBean" field="labelSrc1"/></b></span></div><div class="filter" style="margin-top: 3px; margin-bottom: 7px;"><span style="width: auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<system:label show="text" label="docTit" /> : <system:filter show="escapedValue" filter="11"/></span></div><div class="filter" style="margin-top: 3px; margin-bottom: 7px;"><span style="width: auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<system:label show="text" label="lblMonInstProNroReg" /> : <system:filter show="escapedValue" filter="12"/></span></div><system:edit show="ifValue" from="theBean" field="fromMonBusEntity" value="false"><system:edit show="ifValue" from="theBean" field="fromQueryNoFull" value="false"><div style="margin-top: 3px; margin-bottom: 7px;"><span style="text-align: left !important;"><b>&nbsp;<system:edit show="value" from="theBean" field="labelSrc2"/></b></span></div><div class="filter" style="margin-top: 3px; margin-bottom: 7px;"><span style="width: auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<system:label show="text" label="docTit" /> : <system:filter show="escapedValue" filter="14"/></span></div><div class="filter" style="margin-top: 3px; margin-bottom: 7px;"><span style="width: auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<system:label show="text" label="lblMonInstProNroReg" /> : <system:filter show="escapedValue" filter="15"/></span></div></system:edit></system:edit></div></div></system:edit><system:campaign inLogin="false" inSplash="false" location="verticalDown" /></div><div class="gridContainer" id="gridContainer"><system:campaign inLogin="false" inSplash="false" location="horizontalUp" /><div class="gridHeader" id="gridHeader"><!-- Cabezal y filtros --><table><thead><tr id="trOrderBy" class="header"><% if (request.getAttribute("editMode") != null && (Boolean) request.getAttribute("editMode")) { %><th id="orderByDisplayDocTypeId" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DOC_TYPE"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DOC_TYPE"/>" title="<system:label show="tooltip" label="titDocType" />"></th><% } %><th id="orderByDocTypeId" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DOC_TYPE"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DOC_TYPE"/>" title="<system:label show="tooltip" label="titDocType" />"><div style="width: 210px"><system:label show="text" label="titDocType"/></div></th><th id="orderByName" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_NAME"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_NAME"/>" title="<system:label show="tooltip" label="lblNom" />"><div style="width: 210px"><system:label show="text" label="lblNom" /></div></th><th id="orderBySize" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_SIZE"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_SIZE"/>" title="<system:label show="tooltip" label="lblTam" />"><div style="width: 190px"><system:label show="text" label="lblTam"/></div></th><th id="orderByRegUser" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_USER"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_USER"/>" title="<system:label show="tooltip" label="lblLastUsrName" />"><div style="width: 100px"><system:label show="text" label="lblLastUsrName" /></div></th><th id="orderByRegDate" class="allowSort sort<system:filter show="sortStyle" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DATE"/>" data-sortBy="<system:edit show="constant" from="com.dogma.vo.filter.MonitorDocumentFilterVo" field="ORDER_DATE"/>" title="<system:label show="tooltip" label="lblLastActDate" />"><div style="width: 130px"><system:label show="text" label="lblLastActDate" /></div></th></tr><tr class="filter"><% if (request.getAttribute("editMode") != null && (Boolean) request.getAttribute("editMode")) { %><th><div style="width: 35px"></th><% } %><th title="<system:label show="tooltip" label="titDocType" />"><div style="width: 210px"><select id="cmbDocTypeId" onchange="loadAllDocMetadataFilters(this.value);" ><option></option><system:util show="prepareDocType" saveOn="docType" /><system:edit show="iteration" from="docType" saveOn="docType_save"><system:edit show="saveValue" from="docType_save" field="docTypeId" saveOn="docType"/><option value="<system:edit show="value" from="docType_save" field="docTypeId"/>" ><system:edit show="value" from="docType_save" field="docTypeTitle"/></option></system:edit></select></div></th><th title="<system:label show="tooltip" label="lblNom" />"><div style="width: 210px"><input id="nameFilter" type="text" value="<system:filter show="value" filter="0"></system:filter>"></div></th><th title="<system:label show="tooltip" label="lblTam" />"><div style="width: 185px"><input id="sizeMinFilter" size="5" style="width:40%" type="text" value="<system:filter show="value" filter="3"></system:filter>"> - <input id="sizeMaxFilter" size="5" style="width:40%" type="text" value="<system:filter show="value" filter="8"></system:filter>"></div></th><th title="<system:label show="tooltip" label="lblLastUsrName" />"><div style="width: 100px"><input id="regUsrFilter" type="text" value="<system:filter show="value" filter="5"></system:filter>"></div></th><th><div style="width: 130px"></th></tr></thead></table></div><div class="gridBody" id="gridBody"><!-- Cuerpo de la tabla --><table><thead><tr><% if (request.getAttribute("editMode") != null && (Boolean) request.getAttribute("editMode")) { %><th width="35px"></th><% } %><th width="210px"></th><th width="210px"></th><th width="185px"></th><th width="100px"></th><th width="130px"></th></tr></thead><tbody class="tableData" id="tableData"></tbody></table></div><div class="gridFooter"><%@include file="../../includes/navButtons.jsp" %></div><system:campaign inLogin="false" inSplash="false" location="horizontalDown" /></div><div style="display:none" id="divDragDropForm"></div></div><%@include file="../../includes/footer.jsp" %><%@include file="mdlDocInformation.jsp" %><%@include file="mdlDocVersions.jsp" %><%@include file="mdlDocDownloadInfo.jsp" %><%@include file="../../modals/documents.jsp" %></body></html>
